name: Validate tag

on:
    workflow_call:

jobs:
    validate-tag:
        runs-on: ubuntu-latest
        steps:
            - name: Validate tag
              run: |
                  TAG="${{ github.event.release.tag_name }}"
                  echo "Validating tag: $TAG"

                  # Check if tag matches the required pattern
                  if ! echo "$TAG" | grep -E '^v[0-9]+\.[0-9]+\.[0-9]+(-((docs|dry|canary|alpha|beta|rc)\.[0-9]+))?$'; then
                      echo "❌ Invalid tag format: $TAG"
                      echo "Tag must start with v[MAJOR].[MINOR].[PATCH]"
                      echo "Optional suffix: -[docs|dry|canary|alpha|beta|rc].[NUMBER]"
                      exit 1
                  fi

                  echo "✅ Tag is valid"
